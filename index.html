<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Controle de Estoque</title>
    <link
      rel="shortcut icon"
      href="../assets/img/ccb-semfund.ico"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/assets/css/header.css" />
    <link rel="stylesheet" href="/assets/css/table.css" />
    <link rel="stylesheet" href="/assets/css/form.css" />
    <link rel="stylesheet" href="/assets/css/model.css" />
    <link rel="stylesheet" href="/assets/css/buttmodel.css" />
    <link rel="stylesheet" href="/assets/css/divescolha.css" />
    <link rel="stylesheet" href="/assets/css/btndownl.css" />
    <link rel="stylesheet" href="/assets/css/modalterar.css" />
    <link rel="stylesheet" href="/assets/css/modhistorico.css" />
    <link rel="stylesheet" href="/assets/css/login.css">
    <link rel="stylesheet" href="/assets/css/lupa/lupa_pesq.css">
  </head>
  <body>
    <header>
      <h1>Congregação Cristã no Brasil</h1>
      <div class="search-container">
        <div class="select" id="custom-select">
          <div class="selected" id="selected-option">
            <span id="selected-text">Nome</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="1em"
              viewBox="0 0 512 512"
              class="arrow"
            >
              <path
                d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"
              ></path>
            </svg>
          </div>
          <div class="options">
            <div class="option" data-value="nome">Nome</div>
            <div class="option" data-value="categoria">Categoria</div>
            <div class="option" data-value="numeroNota">Número da Nota</div>
          </div>
        </div>
        <input
          placeholder="Pesquisar..."
          class="input"
          type="text"
          oninput="filtrarTabela()"
        />
      </div>
      <label class="popup">
        <input type="checkbox" />
        <div tabindex="0" class="burger">
          <svg
            viewBox="0 0 24 24"
            fill="white"
            height="20"
            width="20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 2c2.757 0 5 2.243 5 5.001 0 2.756-2.243 5-5 5s-5-2.244-5-5c0-2.758 2.243-5.001 5-5.001zm0-2c-3.866 0-7 3.134-7 7.001 0 3.865 3.134 7 7 7s7-3.135 7-7c0-3.867-3.134-7.001-7-7.001zm6.369 13.353c-.497.498-1.057.931-1.658 1.302 2.872 1.874 4.378 5.083 4.972 7.346h-19.387c.572-2.29 2.058-5.503 4.973-7.358-.603-.374-1.162-.811-1.658-1.312-4.258 3.072-5.611 8.506-5.611 10.669h24c0-2.142-1.44-7.557-5.631-10.647z"
            ></path>
          </svg>
        </div>
        <nav class="popup-window">
          <legend>Conectar-se</legend>
          <ul>
            <li>
              <button id="loginBtn">
                <svg
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.2"
                  stroke-linecap="round"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M19 4v6.406l-3.753 3.741-6.463-6.462 3.7-3.685h6.516zm2-2h-12.388l1.497 1.5-4.171 4.167 9.291 9.291 4.161-4.193 1.61 1.623v-12.388zm-5 4c.552 0 1 .449 1 1s-.448 1-1 1-1-.449-1-1 .448-1 1-1zm0-1c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm6.708.292l-.708.708v3.097l2-2.065-1.292-1.74zm-12.675 9.294l-1.414 1.414h-2.619v2h-2v2h-2v-2.17l5.636-5.626-1.417-1.407-6.219 6.203v5h6v-2h2v-2h2l1.729-1.729-1.696-1.685z"
                  ></path>
                </svg>
                <span>Logar</span>
              </button>
            </li>
            <li>
              <button onclick="window.open('/pags/cadaspag.html', '_blank')">
                <svg
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1"
                  stroke-linecap="round"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.598 9h-1.055c1.482-4.638 5.83-8 10.957-8 6.347 0 11.5 5.153 11.5 11.5s-5.153 11.5-11.5 11.5c-5.127 0-9.475-3.362-10.957-8h1.055c1.443 4.076 5.334 7 9.902 7 5.795 0 10.5-4.705 10.5-10.5s-4.705-10.5-10.5-10.5c-4.568 0-8.459 2.923-9.902 7zm12.228 3l-4.604-3.747.666-.753 6.112 5-6.101 5-.679-.737 4.608-3.763h-14.828v-1h14.826z"
                  ></path>
                </svg>
                <span>Cadastrar</span>
              </button>
            </li>
          </ul>
        </nav>
      </label>
      
      

    </header>

    <div class="container">
      <h2>Lista de Estoques</h2>
      <!-- Botões ao lado -->
      <div class="button-container">
        <button id="openModal" class="buttonModel">Abrir Formulário</button>
        <button class="Btn">
          <svg
            class="svgIcon"
            viewBox="0 0 384 512"
            height="1em"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"
            ></path>
          </svg>
          <span class="icon2"></span>
          <span class="tooltip">Download</span>
        </button>
      </div>
      <button id="btnHistorico" onclick="abrirModalHistorico()">
        Histórico
      </button>
      <table id="tabelaEstoque">
        <thead>
          <tr>
            <th>Número da Nota</th>
            <th>Nome</th>
            <th>Quantidade</th>
            <th>Categoria</th>
            <th>Validade</th>
            <th>Estoque Mínimo</th>
            <th>baixa</th>
          </tr>
        </thead>
        <tbody>
          <!-- Os dados da tabela serão carregados dinamicamente com JavaScript -->
        </tbody>
      </table>
    </div>
    <div id="modalAlterar" class="modal">
      <div class="modal-content">
        <span class="close-modal-alterar">&times;</span>
        <h2>Alterar Quantidade</h2>

        <label for="data">Data:</label>
        <input type="date" id="data" required />
        <label for="produtoId">Produto ID:</label>
        <input type="text" id="produtoId" readonly />
        <label for="evento">Evento:</label>
        <select id="evento">
          <option value="RGE">RGE</option>
          <option value="ADM SP">ADM SP</option>
          <option value="ANCIÃES">ANCIÃES</option>
          <option value="C.O. BRAS">C.O. BRAS</option>
          <option value="COMPLEXO BRAS">COMPLEXO BRAS</option>
          <option value="DARPE/DEPAC/DATEX">DARPE/DEPAC/DATEX</option>
          <option value="DIÁCONOS">DIÁCONOS</option>
          <option value="MÚSICA">MÚSICA</option>
          <option value="SETOR CENTRO">SETOR CENTRO</option>
        </select>
        <label for="quantidade">Quantidade:</label>
        <input type="number" id="quantidade" required />
        
        <!-- Campos adicionais para "Adicionar" -->
        <div id="camposAdicionais" style="display: none;">
            <label for="numeroNota">Número da Nota:</label>
            <input type="text" id="numeroNota" />
        
            <label for="valorNota">Valor da Nota:</label>
            <input type="number" id="valorNota" step="0.01" />
        </div>
        
        <button id="btnAdicionar" onclick="adicionarProduto()">Adicionar</button>
        <button id="btnRemover" onclick="retirarProduto()">Retirar</button>
        <button id="btnSalvarAlteracao" onclick="salvarAlteracao()">Salvar</button>
        
    </div>
    <!-- Modal Histórico -->
    <div id="modalHistorico" class="modal">
      <div class="modal-content">
        <span class="close-modal-historico" onclick="fecharModalHistorico()"
          >&times;</span
        >
        <h2>Histórico de Alterações</h2>
        <table id="tabelaHistorico">
          <thead>
            <tr>
              <th>Data</th>
              <th>Produto</th>
              <th>Quantidade Alterada</th>
              <th>Evento</th>
              <th>Numero Nota</th>
              <th>Valor</th>
            </tr>
          </thead>
          <tbody id="historicoBody"></tbody>
        </table>
      </div>
    </div>

    <div id="modalForm" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Adicionar Novo Item</h2>
        <form id="formAdicionar">
          <input
            type="text"
            id="numeroNota"
            name="numeroNota"
            placeholder="Número da Nota"
            required
          />
          <input
            type="text"
            id="nome"
            name="nome"
            placeholder="Nome do Produto"
            required
          />
          <input
            type="number"
            id="quantidade"
            name="quantidade"
            placeholder="Quantidade"
            required
          />
          <input
            type="text"
            id="categoria"
            name="Categoria"
            placeholder="Categoria"
            required
          />
          <input type="date" id="validade" name="validade" required />
          <input
            type="number"
            id="estoqueMinimo"
            name="estoqueMinimo"
            placeholder="Estoque Mínimo"
            required
          />
          <button type="submit">Adicionar</button>
        </form>
      </div>
    </div>

    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/inventory.js"></script>
    <script src="/assets/js/form.js"></script>
    <script src="/assets/js/header.js"></script>
    <script src="/assets/js/modtab.js"></script>
    <script src="/assets/js/input.js"></script>
    <script src="/assets/js/input.js"></script>
    <script src="/assets/js/sigla.js"></script>
    <script src="/assets/js/modalterar.js"></script>
    <script src="/assets/js/app.js"></script>
    <script src="/assets/js/abrhistorico.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const selectBox = document.getElementById("custom-select");
        const selectedText = document.getElementById("selected-text");
        const options = document.querySelectorAll(".option");

        selectBox.addEventListener("click", () => {
          selectBox.classList.toggle("active");
        });

        options.forEach((option) => {
          option.addEventListener("click", () => {
            selectedText.textContent = option.textContent;
            selectBox.classList.remove("active");
            filtrarTabela();
          });
        });

        document.addEventListener("click", (event) => {
          if (!selectBox.contains(event.target)) {
            selectBox.classList.remove("active");
          }
        });
      });
      const loginBtn = document.getElementById('loginBtn');
        loginBtn.addEventListener('click', function() {
        window.open('/pags/logpag2.html', '_blank');
      });
      const cadastrarBtn = document.getElementById('cadastrarBtn');
        cadastrarBtn.addEventListener('click', function() {
        window.open('/pags/cadaspag.html', '_blank');
      });
    </script>
  </body>
</html>
